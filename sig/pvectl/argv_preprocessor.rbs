module Pvectl
  class ArgvPreprocessor
    MAX_ARGUMENTS: Integer

    MAX_ARGUMENT_LENGTH: Integer

    PASSTHROUGH_FLAGS: Array[String]

    class DuplicateFlagError < Pvectl::Error
      def initialize: (Symbol flag_name, (String | bool) existing_value, (String | bool) new_value) -> void
    end

    def self.process: (Array[String] argv, ?cli_app: untyped) -> Array[String]

    def initialize: (Array[String] argv, ?cli_app: untyped) -> void

    def call: () -> Array[String]

    private

    @argv: Array[String]

    @cli_app: untyped

    def validate_input_limits!: () -> void

    def passthrough_mode?: () -> bool

    def reorder_all_flags: () -> Array[String]

    def extract_global_flags: (Array[String] args) -> [Array[String], Array[String]]

    def find_global_flag: (String arg) -> [Symbol, bool]?

    def flag_matches?: (untyped gli_flag, String flag_part) -> bool

    def flag_display_name: (untyped gli_flag) -> Symbol

    def store_global_flag: (Hash[Symbol, String | bool] store, Symbol name, String | bool value) -> void

    def validate_value!: (String | bool value, Symbol flag_name) -> void

    def identify_command: (Array[String] args) -> [String?, Array[String], Array[String]]

    def find_gli_command: (String name) -> untyped

    def find_gli_subcommand: (untyped cmd, String name) -> untyped

    def reorder_command_flags: (Array[String] args, untyped cmd) -> Array[String]

    def find_command_flag: (String arg, untyped cmd) -> bool?
  end
end
