module Pvectl
  module Services
    class CloneContainer
      DEFAULT_TIMEOUT: Integer

      START_TIMEOUT: Integer

      def initialize: (container_repository: untyped, task_repository: untyped, ?options: Hash[Symbol, untyped]) -> void

      def execute: (ctid: Integer, ?node: String?, ?new_ctid: Integer?, ?hostname: String?, ?target_node: String?, ?storage: String?, ?linked: bool, ?pool: String?, ?description: String?, ?config_params: Hash[Symbol, untyped]) -> Models::ContainerOperationResult

      private

      def generate_hostname: (Models::Container source_ct) -> String

      def build_clone_options: (hostname: String, target_node: String?, storage: String?, linked: bool, pool: String?, description: String?) -> Hash[Symbol, untyped]

      def apply_config_update: (Models::Container source_ct, Integer new_ctid, String node, Hash[Symbol, untyped] config_params, Hash[Symbol, untyped] resource_info) -> Models::ContainerOperationResult

      def build_ct_config_api_params: (Hash[Symbol, untyped] config_params) -> Hash[Symbol, untyped]

      def add_mountpoint_params: (Hash[Symbol, untyped] params, Array[Hash[Symbol, String]] mountpoints) -> void

      def add_net_params: (Hash[Symbol, untyped] params, Array[Hash[Symbol, String]] nets) -> void

      def start_container: (Integer ctid, String node) -> void

      def timeout: () -> Integer

      def container_not_found_error: (Integer ctid) -> Models::ContainerOperationResult

      def linked_clone_error: (Models::Container source_ct) -> Models::ContainerOperationResult
    end
  end
end
